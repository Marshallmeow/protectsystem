# Развертывание системы мониторинга ELK Stack (Elasticsearch)

## Цель работы
1. Освоить базовые подходы централизованного сбора и накопления информации

2. Освоить современные инструменты развертывания контейнирозованных приложений

3. Закрепить знания о современных сетевых протоколах прикладного уровня

## Ход выполнения практической работы

Для разворачивания системы сбора информации Elasticsearch был использован Docker.

### Шаг 1 - Предварительная конфигурация

#### 1.1 Для работы elasticsearch требуется увеличить размер виртуальной памяти системы:

```
sudo sysctl -w vm.max_map_count=262144
```

### Шаг 2 - Cоздание docker-compose.yml

#### 2.1 Создаем сервис setup

#### 2.2 Создаем сервис главной ноды

#### 2.3 Создаем сервис графической панели управления Kibana

#### 2.4 Пропишем используемые Docker volume

### Шаг 3 - Добавление средства сбора информации из файлов журналов Filebeat

#### 3.1 Создаем сервис для запуска Filebeat:

#### 3.2 Создаем файл конфигурации filebeat.yml:



### Шаг 4 - Добавление средства средства сбора сетевого трафика Packetbeat

#### 4.1 Создаем сервис для запуска Packetbeat:

#### 4.2 Создаем файл конфигурации packetbeat.yml:

### Шаг 5 - Запуск сервисов

```
docker-compose up
```

Кластер ElasticSearch успешно запущен. 

### Шаг 6 - работа с ElasticSearch

#### 6.1 Перейдём на веб-ресурс `localhost:5601` 

Авторизуемся от имени пользователя elastic:

![image](https://github.com/Marshallmeow/protectsystem/assets/89981827/f19a5097-50ba-499a-9428-8179c72f8bd7)

Проверяем работоспособность с помощью GET-запроса `_cat/indices`:

![image](https://github.com/Marshallmeow/protectsystem/assets/89981827/2ce0ee0d-82d2-4a5f-8b64-d8fbabddb371)

Filebeat и Packetbeat успешно запущены.


#### 6.2 Проверяем работоспособность Packetbeat
=======
#### 6.2 Проверяем работоспособность Filebeat

Создание Data view для лог-файлов:

![image](https://github.com/Marshallmeow/protectsystem/assets/89981827/449ab749-3553-4a2b-adeb-00e8746c7f25)

#### 6.3 Проверяем работоспособность Packetbeat

Создание Data view для трафика:

![image](https://github.com/Marshallmeow/protectsystem/assets/89981827/9d1d9253-8b60-4c33-be8c-ca3f4b7589f8)

## Оценка результата

Была развёрнута система ElasticSearch и настроена система сбора трафика и лог-файлов.

## Вывод

В результате работы была освоена система контейнеризации приложений Docker, работа с Docker-compose и освоена система централизованного сбора и накопления информации ElasticSearch.
